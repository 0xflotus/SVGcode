(function(){"use strict";const f="discrete";let a,e;const d=(t,s,n,l,r,c)=>(e.clearRect(0,0,r,c),e.setTransform(1,0,0,1,r/2,c/2),e.rotate(l*Math.PI/180),e.filter=n,e.drawImage(t,-t.width/2,-t.height/2),e.setTransform(1,0,0,1,0,0),e.filter=s,e.drawImage(a,0,0,a.width,a.height,0,0,r,c),e.getImageData(0,0,r,c));self.addEventListener("message",t=>{if(t.data.offscreen){a=t.data.offscreen,e=a.getContext("2d");return}const{inputImageBitmap:s,posterize:n,rgba:l,cssFilters:r,rotate:c,width:o,height:i,dpr:u}=t.data;e.scale(u,u),a.width=o,a.height=i;const g=d(s,p(n,l,r),r,c,o,i);t.ports[0].postMessage({result:g})});const p=(t,s)=>{const n=[];return t&&n.push({filter:"componentTransfer",funcR:{type:f,tableValues:s.r},funcG:{type:f,tableValues:s.g},funcB:{type:f,tableValues:s.b},funcA:{type:f,tableValues:s.a}}),new CanvasFilter(n)}})();
