(()=>{(function(){"use strict";const n="discrete";let c,r;const o=(t,a,s,e)=>(r.clearRect(0,0,s,e),r.filter=a,r.drawImage(t,0,0,t.width,t.height,0,0,s,e),r.getImageData(0,0,s,e));self.addEventListener("message",t=>{if(t.data.offscreen){c=t.data.offscreen,r=c.getContext("2d");return}const{inputImageBitmap:a,posterize:s,rgba:e,width:f,height:l,dpr:u}=t.data;r.scale(u,u),c.width=f,c.height=l;const p=o(a,i(s,e),f,l);t.ports[0].postMessage({result:p})});const i=(t,a)=>{let s;return t&&(s=new CanvasFilter({componentTransfer:{funcR:{type:n,tableValues:a.r.map(e=>Number(e))},funcG:{type:n,tableValues:a.g.map(e=>Number(e))},funcB:{type:n,tableValues:a.b.map(e=>Number(e))},funcA:{type:n,tableValues:a.a.map(e=>Number(e))}}})),s}})();})();
