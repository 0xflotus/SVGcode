(()=>{(function(){"use strict";const r="discrete";let c,a;const i=(e,t,s,n)=>(a.clearRect(0,0,s,n),a.filter=t,a.drawImage(e,0,0,e.width,e.height,0,0,s,n),a.getImageData(0,0,s,n));self.addEventListener("message",e=>{if(e.data.offscreen){c=e.data.offscreen,a=c.getContext("2d");return}const{inputImageBitmap:t,posterize:s,rgba:n,width:f,height:l,dpr:o}=e.data;a.scale(o,o),c.width=f,c.height=l;const d=i(t,u(s,n),f,l);e.ports[0].postMessage({result:d})});const u=(e,t)=>{let s;return e&&(s=new CanvasFilter({filter:"componentTransfer",funcR:{type:r,tableValues:t.r},funcG:{type:r,tableValues:t.g},funcB:{type:r,tableValues:t.b},funcA:{type:r,tableValues:t.a}})),s}})();})();
